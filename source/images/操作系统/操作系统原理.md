# 关于课程

### 教材

《计算机操作系统》人民邮电出版社 庞丽萍编

## 计划安排

### 理论课程计划

- 第一章：操作系统概述  2学时
- 第二章：操作系统逻辑结构 2学时
- 第三章：用户界面         2学时
- 第四章：进程管理        8学时
- 第五章：死锁             4学时
- 第六章：存储器管理     6学时
- 第七章：设备管理        4学时
- 第八章：文件管理        4学时

### 上机课程计划

实验总学时为16，分为四个实验，每个实验4学时。

1. 银行家算法
2. 多级队列调度算法
3. 动态分区式存贮区管理
4. 请求分页系统中的置换算法

## 成绩评定

考试50%+平时20%+上机实习30%（含上机考勤和实习报告）

# 第一章 操作系统概述

## 1.1 计算机系统结构

### 1.1.1 计算机系统组成

- 中央处理机（CPU）
- 内存
- 外部设备
	- I/O设备（键盘、显示器、打字机、鼠标）
	- 存储设备（硬盘、软盘、光盘、磁带）
	- 其他设备（MODEM、通信口）

- 系统软件（操作系统、语言编译器、数据库管理系统）
- 应用软件（CAD、MIS、用户自己开发的系统等）
- 工具软件（软、硬件检测疹断程序）

### 1.1.2 软件与硬件的关系

硬件是计算机系统的基础，软件是提高计算机系统效率和方便用户使用计算机的程序，它们二者相互依赖、相互促进、共同发展。

### 1.1.3 在计算机系统中必须配备操作系统的目标

- 方便用户
- 提高计算机系统资源的使用效率

## 1.2 操作系统的形成和发展

### 1.2.1 手工阶段

随着计算机速度的加快，人机矛盾越来越大，直至无法容忍。必须寻求新的办法。

### 1.2.2 批处理

批处理是指系统中有一个监控程序，它负责完成用户程序的调人、启动运行、输出运行结果等工作。

1. 联机批处理
2. 脱机批处理
3. 执行系统
	- 执行系统：执行系统不仅负责调度作业自动地运行，而且还要控制I/O。
	- 虽然批处理系统能调度作业自动地运行，但存在如下缺点：
	1. 系统没有任何保护自己的措施；
	2. 程序进入死循环必须要程序员干预。

作业：程序和数据的集合

### 1.2.3 多道程序设计技术和多道成批系统

60年代计算机硬件获得的两个重大进展：
1. 通道技术
	一种专用部件，负责外部设备与内存之间信息的传输
2. 中断技术
	指主机接到外界的信号（来自CPU外部或内部）时，立即中止原来的工作，转去处理这一外来事件，处理完后，主机又回到原来工作点继续工作。

![[Pasted image 20240227165235.png]]

多道程序设计技术
- 定义：多道程序设计技术是在计算机内存中同时存放几道相互独立的程序，它们在管理程序的控制下相互穿插地运行。
- 特征：多道，宏观上并行、微观上串行

多道成批系统：在批处理系统中采用多道程序设计技术，就形成了批量操作系统。该系统把用户提交的作业成批地送入计算机内存，然后由作业调度程序自动地选择作业运行。
- 优点：缩短作业之间的交接时间，减少处理机的空闲等待时间，提高系统的吞吐量。
- 缺点：用户响应时间较长。用户既不能了解自己程序的运行情况，也不能控制计算机。

### 1.2.4 分时操作系统

分时操作系统：由于中断技术的使用，使得一台计算机能连接多个用户终端，用户可通过各自的终端使用和控制计算机，我们把一台计算机连接多个终端的计算机系统称为分时计算机系统，或称分时系统。

分时技术：把处理机的响应时间分成若于个大小相等（或不相等）的时间单位，称为时间片（如100毫秒），每个终端用户获得CPU，就等于获得一个时间片，该用户程序开始运行，当时间片到（用完），用户程序暂停运行，等待下一次运行。例如：我们上课。

分时操作系统特点：
1. 多用户：即众多联机用户可以同时使用同一台计算机；
2. 独占性：各终端用户感觉到自己独占了计算机；
3. 交互性：用户与计算机之间可进行“会话”。

### 1.2.5 实时操作系统

实时操作系统：
   实时操作系统是又一种类型的操作系统，对外部的请求，实时操作系统能够在规定的时间内处理完毕。

实时：
   指计算机对于用户请求能足够快地进行处理，并做出反映。要求毫秒、微秒级。

实时操作系统的应用：
- 实时控制：工业过程控制、防空系统等
- 实时信息处理：情报检索和查询、飞机订票系统、银行信用卡系统。

实时操作系统特点：
1. 系统对外部的信号必须能及时响应，(在规定的时间内（deadlin）)；
2. 要求高可靠性和安全性，效率则放在第二位；
3. 系统整体性强；
4. 不要求很强的“会话”能力。

### 1.2.6 网络操作系统

略

### 1.2.7 分布式操作系统

略

## 1.3 操作系统概念

### 1.3.1 操作系统定义

1. 科普的观点   操作系统是计算机系统的管理和控制中心，它依照设计者制定的各种调度策略组织和管理计算机系统资源，使之能高效地运行。
2. 功能的观点   操作系统是一个计算机资源管理系统，它负责计算机系统的全部资源的分配、控制、调度和回收。
3. 用户的观点  操作系统是计算机与用户之间的接口，用户通过这种接口使用计算机。
4. 软件的观点  操作系统是程序和数据结构的集合。
5. 管理的观点  操作系统是计算机硬件和软件资源的合理而协调的管理者。
6. 操作系统是一个大型的程序系统，它负责计算机的全部软、硬件资源的分配、调度工作，控制并协调并发活动，实现信息的存取和保护。它提供用户接口，使用户获得良好的工作环境。操作系统使整个计算机系统实现了高效率和高度自动化。

### 1.3.2 操作系统的功能

#### 1.操作系统作为虚拟机

![[Pasted image 20240227171157.png]]

#### 2. 操作系统作为资源管理器

四大功能：
1. 处理机分配
2. 内存管理（主存管理、存储器管理）
3. 设备管理
4. 软件资源管理

## 1.4 操作系统的特性及其应解决的基本问题

### 1.4.1 操作系统的基本特性

为了充分地利用计算机系统资源，采用多道程序设计技术，即在计算机内存中同时存放多道相互独立的程序，这些程序要共享系统中的资源；为了保证系统高效率，又要求系统中的各种资源能最大限度的并行（如CPU与外设）。

操作系统的特性：
1. 并发
2. 共享
3. 不确定性

### 1.4.2 操作系统的性能指标

1. 系统的可靠性
2. 系统吞吐率
3. 系统的响应时间
4. 系统资源的利用率
5. 可移植性

### 1.4.3 操作系统应解决的基本问题

1. 提出解决各种冲突的策略
2. 协调活动的关机
3. 保证数据的一致性
4. 实现数据存取控制

## 1.5 UNIX操作系统

UNIX系统是一个交互式的分时操作系统

### 1.5.1 UNIX操作系统的发展

由于UNIX系统生逢其时，品质优秀很快风靡全球，成为当令各种计算机系统的主流操作系统。

### 1.5.2 UNIX操作系统的主要特点

UNIX系统的成功有以下三个方面原因：
1. 设计思想的正确合理
	UNIX系统的设计者认为操作系统的设计和实现不可能做到满足所有用户的所有要求，而应是“为广大的计算机用户提供一个良好的程序设计环境”。UNIX系统的实践证明了这种设计思想的正确性，后来的Windows 95系统的实践也证明了这一点。
2. 生逢其时、选择恰当
3. 特色明显、品质优良

UNIX系统主要特点：
1. 该系统用高级语言编写，使之易读、易懂、易修改、易移植到别的计算机上。
2. 它有一个简单的用户界面---shell
3. 它使用了在维护上容易的、实现上是高效的树形结构的文件系统。
4. 文件、设备统一处理
5. 内核和核外程序的有机结合
6. 丰富的核外系统程序

# 第二章 操作系统组织架构

## 操作系统的逻辑架构

![[Pasted image 20240229142903.png]]

根据对系统资源和机器指令的使用权限，把处理机执行时的工作状态分为核态和用户态，有的操作系统还将系统程序执行时的机器的状态又分为核态和管态。

其权限次序为：核态、管态、用户态。

## 基本硬件结构：
- 处理机
- 存储器
- 时钟
- 中断与俘获

## 中断类型
1. 输入输出中断（外部设备或通道操作正常结束或发生错误时发生的中断）
2. 外中断（外部非通道式装置所引起的中断）
3. 硬件故障中断（当机器发生故障时的中断 abort）
4. 程序性中断（程序执行的过程中，发生了程序性质的错误或出现了某些特定状态而产生的中断 fault）
5. 访管中断（对操作系统提出某种请求时所发生的中断 trap）

前两类中断来自处理机外部的事件，称为外部中断；后三类是来自处理机内部的中断，称为内部中断，也被称为俘获（trap）。

## 中断进入

对中断请求的整个处理过程称为中断处理，它是由软、硬件结合形成的一套中断机构实施的。在本教材中叫中断进入。

1. 保护中断现场和恢复现场
	- 程序状态字
	- 各寄存器的值
	- 打开文件的状态
2. 程序状态字
	在计算机系统中有一个寄存器（有的系统有几个寄存器）用来存放程序状态字，称为PS。
	- 指令计数器（PC）
	- 机器处于何种状态（核态、用户态）
	- 程序执行时应屏蔽哪些中断（处理机运行级）
	- 寻址方式、编址、保护键
3. 中断响应
	处理机发现有中断请求时，中止现运行程序的执行，并自动引出中断处理程序的过程。中断响应的实质是交换指令执行地址和处理机的状态，以达到如下目的：
	1. 保留程序断点及有关信息
	2. 自动转入相应的中断处理程序执行
4. 中断向量
	具有向量机制的计算机的中断向量包括两个字：
	1. 中断处理程序的入口地址
	2. 中断处理程序的程序状态字

## 中断处理

中断处理和自陷处理的过程是类似的，当硬件完成了中断进入后，转到中断处理程序，进入软件中断处理过程。这个过程主要有如下三项工作：
1. 保护现场和传递参数；
2. 执行相应的中断（或自陷）处理程序；
3. 恢复和退出。

# 第三章 用户接口

操作系统提供两个用户接口：
1. 程序接口：系统调用（通过访管指令实现）
2. 命令接口：
	- 作业控制语言（早期批处理操作系统）
	- 键盘命令（分时操作系统为代表）
	- 图形用户接口GUI（UNIX、WINDOWS）

系统调用的特点：
1. 每个系统调用对应一个系统调用号；
2. 每个系统调用有一个对应的执行程序段；
3. 每个系统调用要求一定数量的输入参数和返回值；
4. 整个系统有一个系统调用执行程序入口地址表。

![[Pasted image 20240229151437.png]]